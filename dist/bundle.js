(()=>{"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}const t=function(e,t){var n,o=Date.now(),r=e/t*16,c=r<0,a=Math.abs(e),i=window.pageYOffset;e+=window.pageYOffset,function u(){var l=Date.now()-o;if(r=a<Math.abs(r)?r>0?a:-a:r,i+=r,window.scrollTo(0,i),a-=Math.abs(r),l>=t||(c?i<=e:i>=e))return window.scrollTo(0,e),void cancelAnimationFrame(n);n=requestAnimationFrame(u)}()},n=function(e,t){var n=document.createElement("div");n.style.cssText="font-size: 2rem; color: white;";var o=document.createElement("div");o.innerHTML='<div class="sk-wave sk-center">\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                </div>',o.setAttribute("style","--sk-color: white;"),e.addEventListener("submit",(function(r){r.preventDefault(),e.appendChild(o);var c,a=new FormData(e),i={};a.forEach((function(e,t){i[t]=e})),(c=JSON.stringify(i),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:c})).then((function(e){if(200!==e.status)throw new Error("response status not 200");o.replaceWith(n),n.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(e){console.error(e),o.replaceWith(n),n.textContent="Что-то пошло не так..."})).finally((function(){setTimeout((function(){n.textContent=""}),3e3),function(e){e.querySelectorAll("input").forEach((function(e){return e.value=""}))}(e),t&&setTimeout((function(){e.closest(".popup").style.display="none"}),3500)}))}))};var o,r,c,a,i,u,l,s,d,v,m,f,p,y,h,g,S,E,q,b,L;(function(t){var n,o=document.querySelector("#timer-days"),r=document.querySelector("#timer-hours"),c=document.querySelector("#timer-minutes"),a=document.querySelector("#timer-seconds"),i=function(e){return e<=9?0+e.toString():e.toString()};function u(){var t,u,l,s,d=(t=(new Date("1 july 2021").getTime()-(new Date).getTime())/1e3,u=Math.floor(t%60),l=Math.floor(t/60%60),s=Math.floor(t/3600)%24,{timeRemaining:t,days:Math.floor(t/3600/24),hours:s,minutes:l,seconds:u});d.timeRemaining<=0&&(d.days=0,d.hours=0,d.minutes=0,d.seconds=0,void 0!==e(n)&&clearInterval(n)),function(e){o.textContent=i(e.days),r.textContent=i(e.hours),c.textContent=i(e.minutes),a.textContent=i(e.seconds)}(d)}u(),n=setInterval(u,1e3)})(),q=document.querySelector("menu"),b=document.querySelector("body"),L=function(e){e.preventDefault(),q.classList.toggle("active-menu")},b.addEventListener("click",(function(e){var n=e.target,o=n.closest("li"),r=!!o&&o.closest("menu");q.classList.contains("active-menu")?o&&r?function(e){L(e);var n=e.target.closest("li").querySelector("a").getAttribute("href"),o=document.querySelector("".concat(n)).getBoundingClientRect().y;t(o,500)}(e):n.closest("menu")&&!n.classList.contains("close-btn")||L(e):n.closest(".menu")&&L(e)})),(E=document.querySelector('img[src = "images/scroll.svg"]')).addEventListener("click",(function(){var e=E.parentNode.getAttribute("href"),n=document.querySelector("".concat(e)).getBoundingClientRect().y;t(n,500)})),g=document.querySelector(".popup"),S=document.querySelector(".popup-content"),document.querySelectorAll(".popup-btn").forEach((function(e){e.addEventListener("click",(function(){g.style.display="block",screen.width<=768?S.style.display="block":function(e,t){var n=Date.now();e.style.top="-100%",e.style.display="block";var o,r=Math.floor(110/300*20),c=-100;!function t(){var a=Date.now()-n,i=10-c;if(c+=r=i<r?i:r,e.style.top=c+"%",a>=300||c>=10)return e.style.top="10%",void cancelAnimationFrame(o);o=requestAnimationFrame(t)}()}(S)}))})),g.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?g.style.display="none":(t=t.closest(".popup-content"))||(g.style.display="none")})),p=document.querySelector(".service-header"),y=p.querySelectorAll(".service-header-tab"),h=document.querySelectorAll(".service-tab"),p.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&y.forEach((function(e,n){e===t&&function(e){for(var t=0;t<h.length;t++)e===t?(y[t].classList.add("active"),h[t].classList.remove("d-none")):(y[t].classList.remove("active"),h[t].classList.add("d-none"))}(n)}))})),i=document.querySelectorAll(".portfolio-item"),u=document.querySelector(".portfolio-content"),l=document.querySelector(".portfolio-dots"),s=0,d=function(e,t,n){e[t].classList.remove(n)},v=function(e,t,n){e[t].classList.add(n)},m=function(){d(i,s,"portfolio-item-active"),d(c,s,"dot-active"),++s>=i.length&&(s=0),v(i,s,"portfolio-item-active"),v(c,s,"dot-active")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(m,e)},i.forEach((function(e){var t=document.createElement("li");t.classList.add("dot"),e.classList.contains("portfolio-item-active")&&t.classList.add("dot-active"),l.insertAdjacentElement("beforeend",t)})),c=document.querySelectorAll(".dot"),u.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(d(i,s,"portfolio-item-active"),d(c,s,"dot-active"),t.matches("#arrow-right")?s++:t.matches("#arrow-left")?s--:t.matches(".dot")&&c.forEach((function(e,n){e===t&&(s=n)})),s>=i.length&&(s=0),s<0&&(s=i.length-1),v(i,s,"portfolio-item-active"),v(c,s,"dot-active"))})),u.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),u.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&f(1500)})),f(1500),o=document.querySelectorAll(".command .command__photo"),r=function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t},o.forEach((function(e){return e.addEventListener("mouseenter",r)})),o.forEach((function(e){return e.addEventListener("mouseleave",r)})),function(){var e,t;document.querySelectorAll("#calc input").forEach((function(e){return e.addEventListener("input",(function(){return e.value=e.value.replace(/\D/g,"")}))})),t=document.querySelector('input[name="user_message"]'),document.querySelectorAll('input[name="user_name"]').forEach((function(e){return e.addEventListener("input",(function(){return e.value=e.value.replace(/[^а-яёА-ЯЁ ]/gi,"")}))})),(e=t).addEventListener("input",(function(){return e.value=e.value.replace(/[^а-яёА-ЯЁ \d.,;:\-?!()"«»]/gi,"")})),document.querySelectorAll('input[name="user_email"]').forEach((function(e){return e.addEventListener("input",(function(){var t=e.value.replace(/[^a-zA-Z@\-_!~'.*\d]/gi,"");e.value="a",e.value=t}))})),document.querySelectorAll('input[name="user_phone"]').forEach((function(e){return e.addEventListener("input",(function(){return e.value=e.value.replace(/[^\d+]/g,"")}))}));document.querySelectorAll("input").forEach((function(e){return e.addEventListener("blur",(function(){e.value=e.value.replace(/^[ -]*/,""),e.value=e.value.replace(/[ -]*$/,""),e.value=e.value.replace(/ +/g," "),e.value=e.value.replace(/-+/g,"-"),"user_name"===e.name&&(e.value=e.value.replace(/[а-яА-Я]+/g,(function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})));var t=e.value;e.value="a",e.value=t}))}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),a=document.getElementById("total"),i=function(e,t){var n,o=e<t,r=Math.floor(Math.abs(t-e)/30);!function c(){if(o&&e>=t||!o&&e<=t)return cancelAnimationFrame(n),void(a.textContent=t);Math.abs(t-e)<r&&(r=Math.abs(t-e)),e=o?e+r:e-r,a.textContent=e,n=requestAnimationFrame(c)}()},u=function(){var t,u=1,l=1,s=+a.textContent,d=n.value,v=+o.value;c.value>1&&(u+=(+c.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),t=d&&v?Math.floor(e*d*v*u*l):0,i(s,t)};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&u()}))}(200),n(document.getElementById("form1")),n(document.getElementById("form2")),n(document.getElementById("form3"),!0)})();