(()=>{"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}const t=function(e,t){var n,r=Date.now(),o=e/t*16,a=o<0,c=Math.abs(e),u=window.pageYOffset;e+=window.pageYOffset,function i(){var l=Date.now()-r;if(o=c<Math.abs(o)?o>0?c:-c:o,u+=o,window.scrollTo(0,u),c-=Math.abs(o),l>=t||(a?u<=e:u>=e))return window.scrollTo(0,e),void cancelAnimationFrame(n);n=requestAnimationFrame(i)}()};function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){i=!0,c=e},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw c}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const o=function(e,t){var n=document.createElement("div");n.style.cssText="font-size: 2rem; color: white;";var r=document.createElement("div");r.innerHTML='<div class="sk-wave sk-center">\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                </div>',r.setAttribute("style","--sk-color: white;"),e.addEventListener("submit",(function(o){o.preventDefault();var a=function(e){var t,n=e.querySelector('input[name = "user_phone"]'),r=e.querySelector('input[name = "user_name"]'),o=e.querySelector('input[name = "user_email"]'),a=n.value.replace(/\D/g,"").length;return r.value.split(" ")[0].length<2?(r.focus(),"В имени не может быть менее одного символа! "):(t=o.value,/^([a-z0-9\-_.]{2,30}@[a-z]{2,10}\.[a-z]{2,5})?$/.test(t)?a<11?(n.focus(),"Телефонный номер не может быть короче 11 цифр!"):"OK":(r.focus(),"Неверный формат e-mail!"))}(e);if("OK"!==a)return n.textContent=a,e.appendChild(n),void setTimeout((function(){n.textContent="",e.removeChild(n)}),3e3);var c=new FormData(e);e.appendChild(r);var u,i={};c.forEach((function(e,t){i[t]=e})),(u=JSON.stringify(i),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:u})).then((function(e){if(200!==e.status)throw new Error("response status not 200");r.replaceWith(n),n.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(e){console.error(e),r.replaceWith(n),n.textContent="Что-то пошло не так..."})).finally((function(){setTimeout((function(){n.textContent=""}),3e3),function(e){e.querySelectorAll("input").forEach((function(e){return e.value=""}))}(e),t&&setTimeout((function(){e.closest(".popup").style.display="none"}),3500)}))}))};var a,c,u,i,l,s,d,v,f,m,p,y,h,g,S,b,E,q,w,L,A;(function(t){var n,r=document.querySelector("#timer-days"),o=document.querySelector("#timer-hours"),a=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds"),u=function(e){return e<=9?0+e.toString():e.toString()};function i(){var t,i,l,s,d=(t=(new Date("1 july 2021").getTime()-(new Date).getTime())/1e3,i=Math.floor(t%60),l=Math.floor(t/60%60),s=Math.floor(t/3600)%24,{timeRemaining:t,days:Math.floor(t/3600/24),hours:s,minutes:l,seconds:i});d.timeRemaining<=0&&(d.days=0,d.hours=0,d.minutes=0,d.seconds=0,void 0!==e(n)&&clearInterval(n)),function(e){r.textContent=u(e.days),o.textContent=u(e.hours),a.textContent=u(e.minutes),c.textContent=u(e.seconds)}(d)}i(),n=setInterval(i,1e3)})(),w=document.querySelector("menu"),L=document.querySelector("body"),A=function(e){e.preventDefault(),w.classList.toggle("active-menu")},L.addEventListener("click",(function(e){var n=e.target,r=n.closest("li"),o=!!r&&r.closest("menu");w.classList.contains("active-menu")?r&&o?function(e){A(e);var n=e.target.closest("li").querySelector("a").getAttribute("href"),r=document.querySelector("".concat(n)).getBoundingClientRect().y;t(r,500)}(e):n.closest("menu")&&!n.classList.contains("close-btn")||A(e):n.closest(".menu")&&A(e)})),(q=document.querySelector('img[src = "images/scroll.svg"]')).addEventListener("click",(function(){var e=q.parentNode.getAttribute("href"),n=document.querySelector("".concat(e)).getBoundingClientRect().y;t(n,500)})),b=document.querySelector(".popup"),E=document.querySelector(".popup-content"),document.querySelectorAll(".popup-btn").forEach((function(e){e.addEventListener("click",(function(){b.style.display="block",screen.width<=768?E.style.display="block":function(e,t){var n=Date.now();e.style.top="-100%",e.style.display="block";var r,o=Math.floor(110/300*20),a=-100;!function t(){var c=Date.now()-n,u=10-a;if(a+=o=u<o?u:o,e.style.top=a+"%",c>=300||a>=10)return e.style.top="10%",void cancelAnimationFrame(r);r=requestAnimationFrame(t)}()}(E)}))})),b.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?b.style.display="none":(t=t.closest(".popup-content"))||(b.style.display="none")})),h=document.querySelector(".service-header"),g=h.querySelectorAll(".service-header-tab"),S=document.querySelectorAll(".service-tab"),h.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&g.forEach((function(e,n){e===t&&function(e){for(var t=0;t<S.length;t++)e===t?(g[t].classList.add("active"),S[t].classList.remove("d-none")):(g[t].classList.remove("active"),S[t].classList.add("d-none"))}(n)}))})),l=document.querySelectorAll(".portfolio-item"),s=document.querySelector(".portfolio-content"),d=document.querySelector(".portfolio-dots"),v=0,f=function(e,t,n){e[t].classList.remove(n)},m=function(e,t,n){e[t].classList.add(n)},p=function(){f(l,v,"portfolio-item-active"),f(u,v,"dot-active"),++v>=l.length&&(v=0),m(l,v,"portfolio-item-active"),m(u,v,"dot-active")},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;i=setInterval(p,e)},l.forEach((function(e){var t=document.createElement("li");t.classList.add("dot"),e.classList.contains("portfolio-item-active")&&t.classList.add("dot-active"),d.insertAdjacentElement("beforeend",t)})),u=document.querySelectorAll(".dot"),s.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(f(l,v,"portfolio-item-active"),f(u,v,"dot-active"),t.matches("#arrow-right")?v++:t.matches("#arrow-left")?v--:t.matches(".dot")&&u.forEach((function(e,n){e===t&&(v=n)})),v>=l.length&&(v=0),v<0&&(v=l.length-1),m(l,v,"portfolio-item-active"),m(u,v,"dot-active"))})),s.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(i)})),s.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&y(1500)})),y(1500),a=document.querySelectorAll(".command .command__photo"),c=function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t},a.forEach((function(e){return e.addEventListener("mouseenter",c)})),a.forEach((function(e){return e.addEventListener("mouseleave",c)})),function(){document.querySelectorAll('input[name="user_email"]').forEach((function(e){return e.setAttribute("required","true")})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__",r=document.querySelectorAll(e);function o(e){var n=e.keyCode,r=t,o=r.replace(/\D/g,""),a=this.value.replace(/\D/g,""),c=0,u=r.replace(/[_\d]/g,(function(e){return c<a.length?a.charAt(c++)||o.charAt(c):e}));-1!==(c=u.indexOf("_"))&&(u=u.slice(0,c));var i=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(i=new RegExp("^"+i+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=u),"blur"===e.type&&this.value.length<5&&(this.value="")}var a,c=n(r);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.addEventListener("input",o),u.addEventListener("focus",o),u.addEventListener("blur",o)}}catch(e){c.e(e)}finally{c.f()}}('input[name="user_phone"]');var e,t;document.querySelectorAll("#calc input").forEach((function(e){return e.addEventListener("input",(function(){return e.value=e.value.replace(/\D/g,"")}))})),t=document.querySelector('input[name="user_message"]'),document.querySelectorAll('input[name="user_name"]').forEach((function(e){return e.addEventListener("input",(function(){return e.value=e.value.replace(/[^а-яёА-ЯЁ ]/gi,"")}))})),(e=t).addEventListener("input",(function(){return e.value=e.value.replace(/[^а-яёА-ЯЁ \d.,;:\-?!()"«»]/gi,"")})),document.querySelectorAll('input[name="user_email"]').forEach((function(e){return e.addEventListener("input",(function(){var t=e.value.replace(/[^a-zA-Z@\-_!~'.*\d]/gi,"");e.value="a",e.value=t}))}));var r=function(e){return e.addEventListener("blur",(function(){e.value=e.value.replace(/^[ -]*/,""),e.value=e.value.replace(/[ -]*$/,""),e.value=e.value.replace(/ +/g," "),e.value=e.value.replace(/-+/g,"-"),"user_name"===e.name&&(e.value=e.value.replace(/[а-яА-Я]+/g,(function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})));var t=e.value;e.value="a",e.value=t}))};document.querySelectorAll('input[name="user_name"]').forEach(r),document.querySelectorAll('input[name="user_email"]').forEach(r)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),o=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total"),u=function(e,t){var n,r=e<t,o=Math.floor(Math.abs(t-e)/30);!function a(){if(r&&e>=t||!r&&e<=t)return cancelAnimationFrame(n),void(c.textContent=t);Math.abs(t-e)<o&&(o=Math.abs(t-e)),e=r?e+o:e-o,c.textContent=e,n=requestAnimationFrame(a)}()},i=function(){var t,i=1,l=1,s=+c.textContent,d=n.value,v=+r.value;a.value>1&&(i+=(+a.value-1)/10),o.value&&o.value<5?l*=2:o.value&&o.value<10&&(l*=1.5),t=d&&v?Math.floor(e*d*v*i*l):0,u(s,t)};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&i()}))}(200),o(document.getElementById("form1")),o(document.getElementById("form2")),o(document.getElementById("form3"),!0)})();