(()=>{"use strict";const e=(e,t)=>{const o=Date.now();let n,c=e/t*16;const a=c<0;let r=Math.abs(e),s=window.pageYOffset;e+=window.pageYOffset;const l=()=>{const i=Date.now()-o;if(c=r<Math.abs(c)?c>0?r:-r:c,s+=c,window.scrollTo(0,s),r-=Math.abs(c),i>=t||(a?s<=e:s>=e))return window.scrollTo(0,e),void cancelAnimationFrame(n);n=requestAnimationFrame(l)};l()},t=e=>{const t=document.createElement("div");t.style.cssText="font-size: 2rem; color: white;";const o=document.createElement("div");o.innerHTML='<div class="sk-wave sk-center">\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                    <div class="sk-wave-rect"></div>\n                                </div>',o.setAttribute("style","--sk-color: white;"),e.addEventListener("submit",(n=>{n.preventDefault(),e.appendChild(o);const c=new FormData(e),a={};var r;c.forEach(((e,t)=>{a[t]=e})),(r=JSON.stringify(a),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:r})).then((e=>{if(200!==e.status)throw new Error("response status not 200");o.replaceWith(t),t.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((e=>{console.error(e),o.replaceWith(t),t.textContent="Что-то пошло не так..."})).finally((()=>{(e=>{e.querySelectorAll("input").forEach((e=>e.value=""))})(e)}))}))};(function(e){const t=document.querySelector("#timer-days"),o=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds");let a;const r=e=>e<=9?0+e.toString():e.toString();function s(){const e=function(){const e=(new Date("1 july 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60),n=Math.floor(e/3600)%24;return{timeRemaining:e,days:Math.floor(e/3600/24),hours:n,minutes:o,seconds:t}}();e.timeRemaining<=0&&(e.days=0,e.hours=0,e.minutes=0,e.seconds=0,void 0!==typeof a&&clearInterval(a)),(e=>{t.textContent=r(e.days),o.textContent=r(e.hours),n.textContent=r(e.minutes),c.textContent=r(e.seconds)})(e)}s(),a=setInterval(s,1e3)})(),(()=>{const t=document.querySelector("menu"),o=document.querySelector("body"),n=e=>{e.preventDefault(),t.classList.toggle("active-menu")};o.addEventListener("click",(o=>{const c=o.target,a=c.closest("li"),r=!!a&&a.closest("menu");t.classList.contains("active-menu")?a&&r?(t=>{n(t);const o=t.target.closest("li").querySelector("a").getAttribute("href"),c=document.querySelector(`${o}`).getBoundingClientRect().y;e(c,500)})(o):c.closest("menu")&&!c.classList.contains("close-btn")||n(o):c.closest(".menu")&&n(o)}))})(),(()=>{const t=document.querySelector('img[src = "images/scroll.svg"]');t.addEventListener("click",(()=>{const o=t.parentNode.getAttribute("href"),n=document.querySelector(`${o}`).getBoundingClientRect().y;e(n,500)}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content");document.querySelectorAll(".popup-btn").forEach((o=>{o.addEventListener("click",(()=>{e.style.display="block",screen.width<=768?t.style.display="block":((e,t)=>{const o=Date.now();e.style.top="-100%",e.style.display="block";let n,c=Math.floor(110/300*20),a=-100;const r=()=>{const t=Date.now()-o,s=10-a;if(c=s<c?s:c,a+=c,e.style.top=a+"%",t>=300||a>=10)return e.style.top="10%",void cancelAnimationFrame(n);n=requestAnimationFrame(r)};r()})(t)}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,c)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");let n,c,a=0;const r=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},l=()=>{r(e,a,"portfolio-item-active"),r(n,a,"dot-active"),a++,a>=e.length&&(a=0),s(e,a,"portfolio-item-active"),s(n,a,"dot-active")},i=(e=3e3)=>{c=setInterval(l,e)};e.forEach((e=>{const t=document.createElement("li");t.classList.add("dot"),e.classList.contains("portfolio-item-active")&&t.classList.add("dot-active"),o.insertAdjacentElement("beforeend",t)})),n=document.querySelectorAll(".dot"),t.addEventListener("click",(t=>{t.preventDefault();const o=t.target;o.matches(".portfolio-btn, .dot")&&(r(e,a,"portfolio-item-active"),r(n,a,"dot-active"),o.matches("#arrow-right")?a++:o.matches("#arrow-left")?a--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(a=t)})),a>=e.length&&(a=0),a<0&&(a=e.length-1),s(e,a,"portfolio-item-active"),s(n,a,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(c)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i(1500)})),i(1500)})(),(()=>{const e=document.querySelectorAll(".command .command__photo"),t=e=>{const t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t};e.forEach((e=>e.addEventListener("mouseenter",t))),e.forEach((e=>e.addEventListener("mouseleave",t)))})(),(()=>{const e=e=>e.addEventListener("input",(()=>e.value=e.value.replace(/[^а-яёА-ЯЁ ]/gi,"")));document.querySelectorAll("#calc input").forEach((e=>e.addEventListener("input",(()=>e.value=e.value.replace(/\D/g,""))))),(()=>{const t=document.querySelector('input[name="user_message"]');var o;document.querySelectorAll('input[name="user_name"]').forEach(e),(o=t).addEventListener("input",(()=>o.value=o.value.replace(/[^а-яёА-ЯЁ \d.,;:\-?!()"«»]/gi,"")))})(),document.querySelectorAll('input[name="user_email"]').forEach((e=>e.addEventListener("input",(()=>{const t=e.value.replace(/[^a-zA-Z@\-_!~'.*]/gi,"");e.value="a",e.value=t})))),document.querySelectorAll('input[name="user_phone"]').forEach((e=>e.addEventListener("input",(()=>e.value=e.value.replace(/[^\d+]/g,"")))));document.querySelectorAll("input").forEach((e=>e.addEventListener("blur",(()=>{e.value=e.value.replace(/^[ -]*/,""),e.value=e.value.replace(/[ -]*$/,""),e.value=e.value.replace(/ +/g," "),e.value=e.value.replace(/-+/g,"-"),"user_name"===e.name&&(e.value=e.value.replace(/[а-яА-Я]+/g,(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase())));const t=e.value;e.value="a",e.value=t}))))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("change",(t=>{const s=t.target;(s.matches("select")||s.matches("input"))&&(()=>{let t=0,s=1,l=1;const i=+r.textContent,u=o.value,d=+n.value;a.value>1&&(s+=(+a.value-1)/10),c.value&&c.value<5?l*=2:c.value&&c.value<10&&(l*=1.5),t=u&&d?Math.floor(e*u*d*s*l):0,((e,t)=>{const o=e<t;let n,c=Math.floor(Math.abs(t-e)/30);const a=()=>{if(o&&e>=t||!o&&e<=t)return cancelAnimationFrame(n),void(r.textContent=t);Math.abs(t-e)<c&&(c=Math.abs(t-e)),e=o?e+c:e-c,r.textContent=e,n=requestAnimationFrame(a)};a()})(i,t)})()}))})(200),t(document.getElementById("form1")),t(document.getElementById("form2")),t(document.getElementById("form3"))})();